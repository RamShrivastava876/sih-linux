@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme layer (dark + refined light) */
@layer base {
  body { @apply font-sans antialiased selection:bg-emerald-500/30 selection:text-emerald-100 transition-colors duration-300 ease-out; }
  :root {
    --bg-gradient-from: #0f172a; /* slate-900 */
    --bg-gradient-mid: #0d1b2b;
    --bg-gradient-to: #022c22; /* emerald deep */
    --panel-bg: rgba(15,23,42,0.78);
    --panel-border: #334155;
    --text-primary: #f1f5f9;
    --text-secondary: #94a3b8;
  }
  .dark {
    --bg-gradient-from: #0b1120;
    --bg-gradient-mid: #102738;
    --bg-gradient-to: #0d1f16;
    --panel-bg: rgba(17,29,41,0.82);
    --panel-bg-alt: rgba(22,41,33,0.78);
    --panel-border: #1e2f37;
    --panel-border-strong: #0d9488;
    --accent: #10b981;
    --accent-soft: #34d399;
    --danger: #f87171;
    --warn: #fbbf24;
    --text-primary: #f1f5f9;
    --text-secondary: #94a3b8;
    --text-faint: #64748b;
    --ring-focus: #0d9488;
  }
  .light, :root.light {
    --bg-gradient-from: #f8fafc; /* slate-50 */
    --bg-gradient-mid: #ffffff;
    --bg-gradient-to: #e6f9f3;  /* pale mint */
    --panel-bg: rgba(255,255,255,0.78);
    --panel-bg-alt: rgba(248,250,252,0.9);
    --panel-border: #d5e3ea; /* cool border */
    --panel-border-strong: #10b981; /* accent */
    --accent: #059669; /* emerald 600 */
    --accent-soft: #34d399; /* emerald 400 */
    --danger: #dc2626;
    --warn: #d97706;
    --text-primary: #0f172a; /* slate-900 */
    --text-secondary: #4b5563; /* slate-600 */
    --text-faint: #64748b;
    --ring-focus: #10b981;
  }
}

@layer components {
  .eco-card { @apply backdrop-blur rounded-xl p-5 shadow-lg shadow-black/40 transition-colors; background: var(--panel-bg); border:1px solid var(--panel-border); color: var(--text-primary); }
  .eco-card:hover { @apply border-emerald-500; }
  .dark .eco-card { background: linear-gradient(145deg,var(--panel-bg),var(--panel-bg-alt)); border-color: var(--panel-border); box-shadow: 0 4px 18px -4px rgba(0,0,0,0.55), 0 0 0 1px rgba(13,148,136,0.08); }
  .dark .eco-card:hover { border-color: var(--panel-border-strong); }
  .light .eco-card { background: linear-gradient(145deg,var(--panel-bg),var(--panel-bg-alt)); box-shadow: 0 4px 18px -6px rgba(15,23,42,0.12), 0 0 0 1px rgba(15,185,129,0.05); }
  .light .eco-card:hover { border-color: var(--panel-border-strong); box-shadow: 0 6px 22px -6px rgba(15,23,42,0.18), 0 0 0 1px rgba(16,185,129,0.15); }

  .eco-gradient-text { @apply font-semibold tracking-wide bg-clip-text text-transparent; background-image: linear-gradient(90deg,#10b981,#06b6d4,#0ea5e9); }
  .dark .eco-gradient-text { background-image: linear-gradient(90deg,#34d399,#06b6d4,#22d3ee); filter: drop-shadow(0 0 4px rgba(16,185,129,0.25)); }
  .light .eco-gradient-text { background-image: linear-gradient(90deg,#059669,#0ea5e9,#0891b2); }

  .app-header { @apply backdrop-blur supports-[backdrop-filter]:bg-slate-950/70 bg-slate-900/80 border-b border-slate-800; }
  .status-badge { @apply inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium bg-slate-800/70 border border-slate-600 text-slate-300; }
  .status-badge--ok { @apply text-emerald-300 border-emerald-500/40; }
  .status-badge--warn { @apply text-amber-300 border-amber-500/40; }
  .status-badge--err { @apply text-rose-300 border-rose-500/40; }

  .btn-base { @apply inline-flex items-center justify-center rounded-md font-medium text-sm px-4 py-2 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-950 disabled:opacity-50 disabled:cursor-not-allowed; }
  .btn-primary { @apply btn-base bg-emerald-600 hover:bg-emerald-500 text-white focus:ring-emerald-400/60; }
  .btn-secondary { @apply btn-base border focus:ring-slate-500/60; background: var(--panel-bg); border-color: var(--panel-border); color: var(--text-primary); }
  .dark .btn-secondary { background: rgba(255,255,255,0.03); border-color: var(--panel-border); }
  .dark .btn-secondary:hover { background: rgba(255,255,255,0.06); }
  .light .btn-secondary { background: rgba(255,255,255,0.65); border-color: var(--panel-border); }
  .light .btn-secondary:hover { background: rgba(255,255,255,0.9); }
  .btn-danger { @apply btn-base bg-rose-600 hover:bg-rose-500 text-white focus:ring-rose-400/60; }
  .btn-outline { @apply btn-base border bg-transparent hover:bg-slate-800/40; border-color: var(--panel-border); color: var(--text-primary); }

  .trust-gauge { @apply relative w-28 h-28 flex items-center justify-center; }
  .trust-gauge svg { @apply w-full h-full; }
  .trust-gauge-value { @apply absolute text-sm font-semibold; color: var(--text-primary); }
  .dark .trust-gauge-value { text-shadow: 0 1px 2px rgba(0,0,0,0.6); }
  .light .trust-gauge-value { text-shadow: 0 1px 2px rgba(255,255,255,0.6); }

  .thin-scrollbar::-webkit-scrollbar { width: 8px; }
  .thin-scrollbar::-webkit-scrollbar-track { @apply bg-slate-800; }
  .thin-scrollbar::-webkit-scrollbar-thumb { @apply bg-slate-600 rounded; }
  .thin-scrollbar::-webkit-scrollbar-thumb:hover { @apply bg-slate-500; }
  .dark .thin-scrollbar::-webkit-scrollbar-track { background: #162836; }
  .dark .thin-scrollbar::-webkit-scrollbar-thumb { background: #1f3b4a; }
  .dark .thin-scrollbar::-webkit-scrollbar-thumb:hover { background: #275061; }

  .eco-gradient-text.shimmer { background-size: 300% 100%; animation: eco-shimmer 6s linear infinite; }
  .dark .eco-gradient-text.shimmer { animation-duration: 8s; }
  .light .eco-gradient-text.shimmer { animation-duration: 7s; }
  /* Floating accent particles (optional decorative) */
  .bg-eco-animated { position: relative; overflow:hidden; }
  .bg-eco-animated:before, .bg-eco-animated:after { content:""; position:absolute; inset:0; background:
    radial-gradient(circle at 20% 30%, rgba(16,185,129,0.10), transparent 60%),
    radial-gradient(circle at 80% 70%, rgba(6,182,212,0.10), transparent 65%),
    radial-gradient(circle at 60% 20%, rgba(14,165,233,0.08), transparent 60%);
    pointer-events:none; animation: eco-pulse 14s ease-in-out infinite alternate; }
  .bg-eco-animated:after { animation-direction: alternate-reverse; mix-blend-mode: overlay; }
}

@layer utilities {
  .fade-in { animation: fade-in 0.4s ease both; }
  @keyframes fade-in { from { opacity:0; transform:translateY(4px);} to { opacity:1; transform:translateY(0);} }
  @keyframes eco-shimmer { 0% { background-position:0% 50%; } 50% { background-position:100% 50%; } 100% { background-position:0% 50%; } }
  @keyframes eco-pulse { 0% { transform:scale(1) translateY(0); opacity:0.9;} 50% { opacity:1;} 100% { transform:scale(1.05) translateY(-2%); opacity:0.85;} }
  .hover-rise { transition: transform .35s cubic-bezier(.4,.1,.2,1), box-shadow .35s; }
  .hover-rise:hover { transform: translateY(-2px); }
  /* Prevent layout jump when method meta appears */
  .method-meta { min-height: 90px; }
  /* Glass header effect */
  .glass-header {
    position: sticky;
    top: 0;
    z-index: 40;
    display:flex;
    flex-direction:column;
    backdrop-filter: blur(18px) saturate(160%);
    -webkit-backdrop-filter: blur(18px) saturate(160%);
    background: linear-gradient(135deg,rgba(15,23,42,0.72),rgba(6,95,70,0.25) 55%,rgba(6,182,212,0.18));
    border-bottom:1px solid rgba(16,185,129,0.25);
    box-shadow: 0 4px 18px -6px rgba(0,0,0,0.55), 0 0 0 1px rgba(16,185,129,0.08);
    border-radius:0 0 1.25rem 1.25rem;
  }
  /* Erase top progress bar */
  .erase-progress-bar { position:relative; height:4px; width:100%; border-radius:8px; overflow:hidden; margin:-4px 0 8px; background:linear-gradient(90deg,rgba(16,185,129,0.15),rgba(6,182,212,0.12)); }
  .erase-progress-indicator { position:absolute; inset:0; width:0; background:linear-gradient(90deg,#10b981,#06b6d4,#0ea5e9); background-size:200% 100%; animation: progress-stripe 4s linear infinite; box-shadow:0 0 6px 1px rgba(16,185,129,.55),0 0 18px -2px rgba(6,182,212,.55); }
  .erase-progress-indicator.indeterminate { width:35%; animation: indeterminate-move 1.2s ease-in-out infinite, progress-stripe 3s linear infinite; }
  @keyframes indeterminate-move { 0%{ transform:translateX(-40%);} 50%{ transform:translateX(40%);} 100%{ transform:translateX(120%);} }
  @keyframes progress-stripe { 0%{ background-position:0% 50%;} 100%{ background-position:200% 50%;} }
  /* Nav underline */
  .nav-btn { overflow:hidden; }
  .nav-underline { position:absolute; left:6px; right:6px; bottom:4px; height:3px; border-radius:2px; background:linear-gradient(90deg,#10b981,#06b6d4,#0ea5e9); box-shadow:0 0 0 1px rgba(16,185,129,0.35),0 2px 6px -1px rgba(6,182,212,0.5); }
  .inner-glow { box-shadow: inset 0 0 0 1px rgba(16,185,129,0.35), 0 4px 12px -4px rgba(0,0,0,0.55); }
  .light .glass-header { 
    background: linear-gradient(135deg,rgba(255,255,255,0.72),rgba(237,255,251,0.55) 60%,rgba(16,185,129,0.18));
    border-bottom:1px solid rgba(16,185,129,0.35);
    box-shadow: 0 4px 20px -8px rgba(15,23,42,0.25), 0 0 0 1px rgba(16,185,129,0.10);
  }
  .glass-header::before { /* subtle noise/texture overlay */
    content:""; position:absolute; inset:0; pointer-events:none; border-radius:inherit;
    background: radial-gradient(circle at 15% 25%, rgba(16,185,129,0.18), transparent 60%),
                radial-gradient(circle at 80% 70%, rgba(6,182,212,0.16), transparent 65%);
    mix-blend-mode:overlay; opacity:.85;
  }
  @supports not ((backdrop-filter: blur(1px))) {
    .glass-header { backdrop-filter:none; -webkit-backdrop-filter:none; }
  }
  .fade-slide-in { animation: fade-slide-in .5s both; }
  @keyframes fade-slide-in { from { opacity:0; transform: translateY(6px);} to { opacity:1; transform:translateY(0);} }
  .pulse-ring { position:relative; }
  .pulse-ring:after { content:""; position:absolute; inset:-6px; border-radius:inherit; border:2px solid rgba(16,185,129,0.15); animation: pulse-ring 2.8s ease-out infinite; }
  @keyframes pulse-ring { 0% { transform:scale(.85); opacity:.6;} 70% { transform:scale(1.25); opacity:0;} 100% { opacity:0;} }
  @media print {
    .no-print { display: none !important; }
    body { @apply bg-white text-black; }
    .eco-card { @apply shadow-none border-slate-300 bg-white; }
    .eco-gradient-text { @apply text-black bg-none; -webkit-text-fill-color: currentColor; }
  }
  .ring-subtle { @apply focus:outline-none focus:ring-2 focus:ring-emerald-500/40 focus:ring-offset-2 focus:ring-offset-slate-950; }
  pre { background: rgba(0,0,0,0.25); }
  .dark pre { background: #0f172a; border:1px solid #1e293b; border-radius: .5rem; }
  .dark code, .dark pre { color: #cbd5e1; }
  .dark a { color: var(--accent-soft); }
  .dark a:hover { color: var(--accent); }
  .light pre { background: #f1f5f9; border:1px solid #d5e3ea; border-radius: .5rem; color:#334155; }
  .light code { color:#0f172a; }
  .light a { color: var(--accent); }
  .light a:hover { color:#047857; }
}
